{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { signOut } from 'firebase/auth';\nimport { auth, db } from \"../firebase-config\";\nimport { setDoc, getDocs, collection, doc, query, where, onSnapshot, updateDoc, getDoc } from \"firebase/firestore\";\nexport var ProfileScreen = function (_Component) {\n  _inherits(ProfileScreen, _Component);\n\n  var _super = _createSuper(ProfileScreen);\n\n  function ProfileScreen() {\n    var _this;\n\n    _classCallCheck(this, ProfileScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.useEffect = function () {\n      try {\n        var user = auth.currentUser;\n\n        var _q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n\n        var getUser = function getUser() {\n          var data;\n          return _regeneratorRuntime.async(function getUser$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return _regeneratorRuntime.awrap(getDocs(_q));\n\n                case 2:\n                  data = _context.sent;\n                  setProfile(data.docs.map(function (doc) {\n                    return _objectSpread(_objectSpread({}, doc.data()), {}, {\n                      id: doc.id\n                    });\n                  }));\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, null, null, null, Promise);\n        };\n\n        getUser();\n      } catch (error) {\n        console.log(error.message);\n      }\n    };\n\n    _this.signOutUser = function () {\n      signOut(auth).then(function () {}).catch(function (error) {});\n    };\n\n    _this.UpdateUserInfo = function _callee() {\n      var querySnapshot, docID, user;\n      return _regeneratorRuntime.async(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(getDocs(q));\n\n            case 2:\n              querySnapshot = _context2.sent;\n              docID = '';\n              querySnapshot.forEach(function (doc) {\n                docID = doc.id;\n              });\n              user = doc(db, \"users\", docID);\n              _context2.next = 8;\n              return _regeneratorRuntime.awrap(updateDoc(user, {\n                firstname: firstname,\n                lastname: lastname,\n                phoneNumber: phoneNumber\n              }));\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    return _this;\n  }\n\n  _createClass(ProfileScreen, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: styles.container\n      }, React.createElement(View, {\n        style: styles.header\n      }, React.createElement(Text, {\n        style: styles.h\n      }, \" \", React.createElement(\"h1\", null, \"PROFILE\"), \" \")), React.createElement(View, null, profile.map(function (profile) {\n        return React.createElement(View, null, React.createElement(View, null, React.createElement(\"h1\", null, profile.fullname), React.createElement(TextInput, {\n          placeholder: \"Change fullname\",\n          onChange: function onChange(event) {\n            setFullname(event.target.value);\n          }\n        })), React.createElement(View, null, React.createElement(\"h1\", null, profile.surname), React.createElement(TextInput, {\n          placeholder: \"Change surname\",\n          onChange: function onChange(event) {\n            setSurname(event.target.value);\n          }\n        })), React.createElement(View, null, React.createElement(\"h1\", null, profile.phoneNumber), React.createElement(\"input\", {\n          placeholder: \"Change Phone Number\",\n          onChange: function onChange(event) {\n            setPhoneNumber(event.target.value);\n          }\n        })), React.createElement(\"button\", {\n          onClick: UpdateUserInfo\n        }, \"Edit\"));\n      })), React.createElement(View, {\n        style: styles.footer\n      }, React.createElement(TouchableOpacity, {\n        style: styles.button,\n        onPress: this.signOutUser\n      }, React.createElement(Text, {\n        style: {\n          color: '#FFFFFF',\n          fontWeight: 700,\n          fontSize: 24\n        }\n      }, React.createElement(React.Fragment, null, \"Logout\")))));\n    }\n  }]);\n\n  return ProfileScreen;\n}(Component);\nexport default ProfileScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginHorizontal: 50\n  },\n  h: {\n    blackgroundColor: \"#E9446A\",\n    color: \"#3260a8\",\n    textAlign: \"center\"\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: 32,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#D8D9DB\"\n  },\n  footer: {\n    position: 'absolute',\n    flex: 1,\n    bottom: -10,\n    flexDirection: 'row',\n    height: 80,\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%'\n  },\n  button: {\n    flex: 1,\n    backgroundColor: \"#3260a8\",\n    borderRadius: 5,\n    height: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"names":["React","Component","signOut","auth","db","setDoc","getDocs","collection","doc","query","where","onSnapshot","updateDoc","getDoc","ProfileScreen","useEffect","user","currentUser","q","uid","getUser","data","setProfile","docs","map","id","error","console","log","message","signOutUser","then","catch","UpdateUserInfo","querySnapshot","docID","forEach","firstname","lastname","phoneNumber","styles","container","header","h","profile","fullname","event","setFullname","target","value","surname","setSurname","setPhoneNumber","footer","button","color","fontWeight","fontSize","StyleSheet","create","flex","marginHorizontal","blackgroundColor","textAlign","flexDirection","justifyContent","paddingHorizontal","paddingVertical","borderBottomWidth","borderBottomColor","position","bottom","height","alignItems","width","backgroundColor","borderRadius"],"sources":["D:/work/AppTest/expo5/screens/ProfileScreen.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { Text, View, StyleSheet, TouchableOpacity } from 'react-native'\r\nimport { signOut } from 'firebase/auth'\r\nimport { auth, db } from '../firebase-config'\r\nimport { setDoc, getDocs, collection, doc, query, where, onSnapshot, updateDoc, getDoc } from \"firebase/firestore\";\r\n\r\nexport class ProfileScreen extends Component {\r\n\r\n    useEffect = () => {\r\n        try {\r\n            const user = auth.currentUser\r\n            const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\r\n            const getUser = async () => {\r\n                const data = await getDocs(q);\r\n                setProfile(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n            }\r\n            getUser();\r\n        } catch (error) {\r\n            console.log(error.message);\r\n        }\r\n    }\r\n\r\n    signOutUser = () => {\r\n        signOut(auth).then(() => {\r\n            // Sign-out successful.\r\n        }).catch((error) => {\r\n            // An error happened.\r\n        });\r\n    }\r\n\r\n    UpdateUserInfo = async () => {\r\n        const querySnapshot = await getDocs(q);\r\n        let docID = '';\r\n        querySnapshot.forEach((doc) => {\r\n            // if email is you primary key then only document will be fetched so it is safe to continue, this line will get the documentID of user so that we can update it\r\n            docID = doc.id;\r\n        });\r\n        const user = doc(db, \"users\", docID);\r\n\r\n        // Set the \"capital\" field of the city 'DC'\r\n        await updateDoc(user, {\r\n            firstname: firstname,\r\n            lastname: lastname,\r\n            phoneNumber: phoneNumber,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.container}>\r\n                <View style={styles.header}>\r\n                    <Text style={styles.h}> <h1>PROFILE</h1> </Text>\r\n                </View>\r\n                <View>\r\n                {profile.map((profile) => {\r\n          return (\r\n            <View>\r\n              <View>\r\n                <h1>{profile.fullname}</h1>\r\n                <TextInput\r\n                  placeholder=\"Change fullname\"\r\n                  onChange={(event) => {\r\n                    setFullname(event.target.value);\r\n                  }}\r\n                />\r\n              </View>\r\n              <View>\r\n                <h1>{profile.surname}</h1>\r\n                <TextInput \r\n                  placeholder=\"Change surname\"\r\n                  onChange={(event) => {\r\n                    setSurname(event.target.value);\r\n                  }}\r\n                />\r\n              </View>\r\n              <View>\r\n                <h1>{profile.phoneNumber}</h1>\r\n                <input \r\n                  placeholder=\"Change Phone Number\"\r\n                  onChange={(event) => {\r\n                    setPhoneNumber(event.target.value);\r\n                  }}\r\n                />\r\n              </View>\r\n              <button onClick={UpdateUserInfo}>Edit</button>\r\n            </View>\r\n        )\r\n      })}\r\n                </View>\r\n                <View style={styles.footer}>\r\n                    <TouchableOpacity style={styles.button} onPress={this.signOutUser} >\r\n                        <Text style={{ color: '#FFFFFF', fontWeight: 700, fontSize: 24 }}><>Logout</></Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ProfileScreen\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        marginHorizontal: 50,\r\n    },\r\n    h: {\r\n        blackgroundColor: \"#E9446A\",\r\n        color: \"#3260a8\",\r\n        textAlign: \"center\",\r\n    },\r\n    header: {\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n        paddingHorizontal: 32,\r\n        paddingVertical: 12,\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: \"#D8D9DB\"\r\n    },\r\n    footer: {\r\n        position: 'absolute',\r\n        flex: 1,\r\n        bottom: -10,\r\n        flexDirection: 'row',\r\n        height: 80,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: '100%',\r\n    },\r\n    button: {\r\n        flex: 1,\r\n        backgroundColor: \"#3260a8\",\r\n        borderRadius: 5,\r\n        height: 50,\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n    }\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}