{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Ionicons } from '@expo/vector-icons';\nimport Constants from 'expo-constants';\nimport * as Permissions from \"expo-permissions\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport Fire from \"../Fire\";\n\nvar PostScreen = function (_Component) {\n  _inherits(PostScreen, _Component);\n\n  var _super = _createSuper(PostScreen);\n\n  function PostScreen() {\n    var _this;\n\n    _classCallCheck(this, PostScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      text: \"\",\n      image: null\n    };\n\n    _this.getPhotoPermisston = function _callee() {\n      var _await$Permissions$as, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!Constants.platform.ios) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n            case 3:\n              _await$Permissions$as = _context.sent;\n              status = _await$Permissions$as.status;\n\n              if (status != \"granted\") {\n                alert(\"We need permission\");\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.handlePost = function () {\n      Fire.shared.addPost({\n        text: _this.state.text.trim(),\n        localUri: _this.state.image\n      }).then(function (ref) {\n        _this.setState({\n          text: \"\",\n          image: null\n        });\n\n        _this.props.navigation.goBack();\n      }).catch(function (error) {\n        alert(error);\n      });\n    };\n\n    _this.pickImage = function _callee2() {\n      var result;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.Images,\n                allowsEditing: true,\n                aspect: [4, 3]\n              }));\n\n            case 2:\n              result = _context2.sent;\n\n              if (!result.cancelled) {\n                _this.setState({\n                  image: result.uri\n                });\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    return _this;\n  }\n\n  _createClass(PostScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getPhotoPermisston;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(SafeAreaView, {\n        style: styles.container\n      }, React.createElement(View, {\n        style: styles.header\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.goBack();\n        }\n      }, React.createElement(Ionicons, {\n        name: \"chevron-back-circle-sharp\",\n        size: 24,\n        color: \"black\"\n      })), React.createElement(TouchableOpacity, {\n        onPress: this.handlePost\n      }, React.createElement(Text, {\n        style: styles.button\n      }, \"Post\"))), React.createElement(View, {\n        style: styles.inputContainer\n      }, React.createElement(Image, {\n        source: require(\"../assets/favicon.png\"),\n        style: styles.avatar\n      }), React.createElement(TextInput, {\n        autoFocus: true,\n        multiline: true,\n        numberOfLines: 4,\n        style: {\n          flex: 1\n        },\n        placeholder: \"Want to share something?\",\n        onChangeText: function onChangeText(text) {\n          return _this2.setState({\n            text: text\n          });\n        },\n        value: this.state.text\n      })), React.createElement(TouchableOpacity, {\n        style: styles.photo,\n        onPress: this.pickImage\n      }, React.createElement(Ionicons, {\n        name: \"md-camera\",\n        size: 32,\n        color: \"#D8D9DB\"\n      })), React.createElement(View, {\n        style: {\n          marginHorizontal: 32,\n          marginTop: 32,\n          height: 150\n        }\n      }, React.createElement(Image, {\n        source: {\n          uri: this.state.image\n        },\n        style: {\n          width: \"100%\",\n          height: \"100%\"\n        }\n      })));\n    }\n  }]);\n\n  return PostScreen;\n}(Component);\n\nexport { PostScreen as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: 32,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#D8D9DB\"\n  },\n  inputContainer: {\n    margin: 32,\n    flexDirection: \"row\"\n  },\n  avatar: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    marginRight: 16\n  },\n  photo: {\n    alignItems: \"flex-end\",\n    marginHorizontal: 32\n  },\n  button: {\n    Color: \"#E9446A\",\n    fontWeight: \"500\"\n  }\n});","map":{"version":3,"names":["React","Component","Ionicons","Constants","Permissions","ImagePicker","Fire","PostScreen","state","text","image","getPhotoPermisston","platform","ios","askAsync","CAMERA_ROLL","status","alert","handlePost","shared","addPost","trim","localUri","then","ref","setState","props","navigation","goBack","catch","error","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","result","cancelled","uri","styles","container","header","button","inputContainer","require","avatar","flex","photo","marginHorizontal","marginTop","height","width","StyleSheet","create","flexDirection","justifyContent","paddingHorizontal","paddingVertical","borderBottomWidth","borderBottomColor","margin","borderRadius","marginRight","alignItems","Color","fontWeight"],"sources":["D:/work/AppTest/expo5/screens/PostScreen.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { Text, View, StyleSheet, TouchableOpacity, SafeAreaView, TextInput, Image } from 'react-native'\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport Constants from 'expo-constants';\r\nimport * as Permissions from \"expo-permissions\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport Fire from '../Fire';\r\n\r\n\r\nexport default class PostScreen extends Component {\r\n\r\n    state = {\r\n        text: \"\",\r\n        image: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getPhotoPermisston\r\n    }\r\n\r\n    getPhotoPermisston = async () => {\r\n        if (Constants.platform.ios) {\r\n            const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\r\n            if (status != \"granted\") {\r\n                alert(\"We need permission\")\r\n            }\r\n        }\r\n    }\r\n\r\n    handlePost = () => {\r\n        Fire.shared\r\n            .addPost({ text: this.state.text.trim(), localUri: this.state.image })\r\n            .then(ref => {\r\n                this.setState({ text: \"\", image: null });\r\n                this.props.navigation.goBack();\r\n            })\r\n            .catch(error => {\r\n                alert(error);\r\n            });\r\n    }\r\n\r\n    pickImage = async () => {\r\n        let result = await ImagePicker.launchImageLibraryAsync({\r\n            mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n            allowsEditing: true,\r\n            aspect: [4, 3]\r\n        });\r\n\r\n        if (!result.cancelled) {\r\n            this.setState({ image: result.uri });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <SafeAreaView style={styles.container}>\r\n                <View style={styles.header}>\r\n                    <TouchableOpacity onPress={() => this.props.navigation.goBack()}>\r\n                        <Ionicons name=\"chevron-back-circle-sharp\" size={24} color=\"black\" />\r\n                    </TouchableOpacity>\r\n\r\n                    <TouchableOpacity onPress={this.handlePost}>\r\n                        <Text style={styles.button}>Post</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n\r\n                <View style={styles.inputContainer}>\r\n                    <Image source={require(\"../assets/favicon.png\")} style={styles.avatar} />\r\n                    <TextInput\r\n                        autoFocus={true}\r\n                        multiline={true}\r\n                        numberOfLines={4}\r\n                        style={{ flex: 1 }}\r\n                        placeholder=\"Want to share something?\"\r\n                        onChangeText={text => this.setState({ text })}\r\n                        value={this.state.text}\r\n                    />\r\n                </View>\r\n\r\n                <TouchableOpacity style={styles.photo} onPress={this.pickImage}>\r\n                    <Ionicons name=\"md-camera\" size={32} color=\"#D8D9DB\"></Ionicons>\r\n                </TouchableOpacity>\r\n\r\n                <View style={{ marginHorizontal: 32, marginTop: 32, height: 150 }}>\r\n                    <Image source={{ uri: this.state.image }} style={{ width: \"100%\", height: \"100%\" }}></Image>\r\n                </View>\r\n\r\n\r\n            </SafeAreaView>\r\n\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1\r\n    },\r\n    header: {\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n        paddingHorizontal: 32,\r\n        paddingVertical: 12,\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: \"#D8D9DB\"\r\n    },\r\n    inputContainer: {\r\n        margin: 32,\r\n        flexDirection: \"row\"\r\n    },\r\n    avatar: {\r\n        width: 48,\r\n        height: 48,\r\n        borderRadius: 24,\r\n        marginRight: 16\r\n    },\r\n    photo: {\r\n        alignItems: \"flex-end\",\r\n        marginHorizontal: 32\r\n    },\r\n    button:{\r\n        Color: \"#E9446A\",\r\n        fontWeight: \"500\",\r\n    },\r\n})\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}